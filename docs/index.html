<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.537">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Solving Engineering Problemsusing Python - A collection of Jupyter Notebooks</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Solving Engineering Problems<br>using Python</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./source.html"> 
<span class="menu-text">Source</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#electrical-engineering" id="toc-electrical-engineering" class="nav-link" data-scroll-target="#electrical-engineering">Electrical engineering</a>
  <ul class="collapse">
  <li><a href="#circuit-analysis" id="toc-circuit-analysis" class="nav-link" data-scroll-target="#circuit-analysis">Circuit Analysis</a></li>
  <li><a href="#filter-synthesis" id="toc-filter-synthesis" class="nav-link" data-scroll-target="#filter-synthesis">Filter synthesis</a></li>
  <li><a href="#analog-circuits" id="toc-analog-circuits" class="nav-link" data-scroll-target="#analog-circuits">Analog Circuits</a></li>
  <li><a href="#electric-machines-electromechanics" id="toc-electric-machines-electromechanics" class="nav-link" data-scroll-target="#electric-machines-electromechanics">Electric Machines &amp; Electromechanics</a></li>
  <li><a href="#heat-transfer" id="toc-heat-transfer" class="nav-link" data-scroll-target="#heat-transfer">Heat transfer</a></li>
  <li><a href="#radio-and-rf-design" id="toc-radio-and-rf-design" class="nav-link" data-scroll-target="#radio-and-rf-design">Radio and RF design</a></li>
  <li><a href="#information-security" id="toc-information-security" class="nav-link" data-scroll-target="#information-security">Information security</a></li>
  <li><a href="#electromagnetics" id="toc-electromagnetics" class="nav-link" data-scroll-target="#electromagnetics">Electromagnetics</a></li>
  <li><a href="#signal-processing" id="toc-signal-processing" class="nav-link" data-scroll-target="#signal-processing">Signal processing</a></li>
  <li><a href="#circuit-python" id="toc-circuit-python" class="nav-link" data-scroll-target="#circuit-python">Circuit Python</a></li>
  </ul></li>
  <li><a href="#civil-engineering" id="toc-civil-engineering" class="nav-link" data-scroll-target="#civil-engineering">Civil engineering</a></li>
  <li><a href="#mechanical-engineering" id="toc-mechanical-engineering" class="nav-link" data-scroll-target="#mechanical-engineering">Mechanical engineering</a></li>
  <li><a href="#engineering-economics" id="toc-engineering-economics" class="nav-link" data-scroll-target="#engineering-economics">Engineering economics</a></li>
  <li><a href="#engineering-mathmatics" id="toc-engineering-mathmatics" class="nav-link" data-scroll-target="#engineering-mathmatics">Engineering mathmatics</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">A collection of Jupyter Notebooks</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Last update: 21 Jan 2024</p>
<ul>
<li>These pages are draft copies and only half baked.</li>
<li>Many sections are still under construction.</li>
<li>Only preliminary files have been posted to github.</li>
<li>Spelling and grammar checks have not been completed.</li>
<li>The pages are posted for testing only.<br>
</li>
</ul>
</div>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This site provides a place to host a few of my JupyterLab notebooks. The <a href="https://jupyterlab.readthedocs.io/en/latest/">JupyterLab notebooks</a> use the <a href="https://www.sympy.org/">SymPy</a>, <a href="https://numpy.org/">NumPy</a>, <a href="https://scipy.org/">SciPy</a>, <a href="https://pandas.pydata.org/">Pandas</a> and the <a href="https://www.python.org/">Python</a> programming language libraries to analyize various topics. Jupyter Notebooks are used for a varity of programming projects. The notebooks combine code and narrative in the same ducument. Within a jupyter notebook there are three types of cells, code cells, markdown cells and raw cells. The code cells contain the python code, the markdown cells contain text that can be formated with markdown. The combination of code cells mingled with mardown cells provides a convient and powerful way to build a report containtaining narrative and the results of calculations.</p>
<p>As new notebooks are completed a hyperlink will be added. Topics in the outlines below are ideas for future notebooks.</p>
<section id="electrical-engineering" class="level2">
<h2 class="anchored" data-anchor-id="electrical-engineering"><a href="https://en.wikipedia.org/wiki/Electrical_engineering">Electrical engineering</a></h2>
<p>The following notebooks cover various topics in electrical engineering. Electrical engineering is an engineering discipline concerned with electricity, electronics and electromagnetism. My intrest is in circuits and systems, which covers theory, analysis, design, practical implementations of circuits and the application of circuit techniques to systems and to signal processing.</p>
<section id="circuit-analysis" class="level3">
<h3 class="anchored" data-anchor-id="circuit-analysis">Circuit Analysis</h3>
<section id="symbolic-modified-nodal-analysis-using-python" class="level4">
<h4 class="anchored" data-anchor-id="symbolic-modified-nodal-analysis-using-python"><a href="https://tiburonboy.github.io/Symbolic-Modified-Nodal-Analysis-using-Python/">Symbolic Modified Nodal Analysis using Python</a></h4>
<p>The link above is to the online version of my book: Symbolic Modified Nodal Analysis using Python. Symbolic circuit analysis is a circuit analysis method that derives network equations with the circuit elements represented by symbols.</p>
</section>
<section id="source-free-series-circuit" class="level4">
<h4 class="anchored" data-anchor-id="source-free-series-circuit"><a href="./Source free series circuit.html">Source free series circuit</a></h4>
<p>In this notebook, the Python modules SymPy and SciPy are used to solve for currents and voltages in a series R, L and C circuit from the characteristic differential equation. A source free series RLC circuit consists of a resistor, capacitor and inductor connected in series with some initial energy stored either in the inductor, capacitor or both. Since the circuit is a single loop, the current flowing around the loop is the same current in each component. Both parallel and series connected circuits are usually presented in electrical circuit analysis classes. The two textbooks I used while in college presented the parallel connected circuit in some detail then kind of glossed over the series connect circuit since it is the dual of the other. The circuit to be analyzed is shown below and was drawn using EasyEDA, the link to the schematic is here.</p>
</section>
</section>
<section id="filter-synthesis" class="level3">
<h3 class="anchored" data-anchor-id="filter-synthesis">Filter synthesis</h3>
<section id="scipy-analog-filter-design" class="level4">
<h4 class="anchored" data-anchor-id="scipy-analog-filter-design"><a href="./SciPy analog filter design.html">SciPy analog filter design</a></h4>
<p>This notebook describes the use of filter functions in the <a href="https://docs.scipy.org/doc/scipy/reference/signal.html">SciPy</a> library which can be used to design analog filters. Filters are one of the basic building blocks of signal processing. In general terms, filters used for signal processing can be divided into two groups, analog and digital filters. Analog filters, the topic of this notebook, are filters which can be described with linear differential equations and implemented in circuits which operate on continuously varying signals. A digital filter is a system that performs operations on a sampled, discrete-time signal with numerical operations. The first part of this notebook uses SciPy functions to calculate analog filter polynomials based on the classical <a href="https://en.wikipedia.org/wiki/Butterworth_filter">Butterworth</a>, <a href="https://en.wikipedia.org/wiki/Chebyshev_filter">Chebyshev</a>, <a href="https://en.wikipedia.org/wiki/Elliptic_filter">Elliptic</a> and <a href="https://en.wikipedia.org/wiki/Bessel_filter">Bessel</a> filters. The last section of this notebook walks through a Butterworth filter design and Cauer synthesis of an LC ladder type filter.</p>
<p>Future topics</p>
<ul>
<li>Polynimial implementations</li>
<li>Active implementations
<ul>
<li>State variable filter design<br>
</li>
<li>Bi-Quad LP, HP, BP, BR<br>
</li>
<li>Sallen Key active filter</li>
</ul></li>
<li>Crystal filters</li>
<li>Helical filters</li>
<li>Wave guide filters</li>
</ul>
</section>
</section>
<section id="analog-circuits" class="level3">
<h3 class="anchored" data-anchor-id="analog-circuits"><a href="https://en.wikipedia.org/wiki/Electronic_circuit">Analog Circuits</a></h3>
<p>Analog electronic circuits are those in which current or voltage vary continuously with time to correspond to the information being represented. The basic components of analog circuits are wires, resistors, capacitors, inductors, diodes, and transistors.</p>
<p>Future topics</p>
<ul>
<li>semiconductors</li>
<li>Diodes</li>
<li>Transistors</li>
<li>Amplifiers</li>
<li>Wave forming circuits</li>
<li>Power electronics</li>
<li>Analog computing</li>
<li>Vacuum tube models for SPICE</li>
</ul>
</section>
<section id="electric-machines-electromechanics" class="level3">
<h3 class="anchored" data-anchor-id="electric-machines-electromechanics">Electric Machines &amp; Electromechanics</h3>
<section id="overshot-waterwheel-hydroelectric-power-system-analysis" class="level4">
<h4 class="anchored" data-anchor-id="overshot-waterwheel-hydroelectric-power-system-analysis"><a href="./Overshot waterwheel hydroelectric power system analysis.html">Overshot waterwheel hydroelectric power system analysis</a></h4>
<p>This notebook examines the construction of a small hydroelectric system built by <a href="https://www.youtube.com/c/LoftisPartyofSix/about">Michael Loftis</a>, a YouTuber, real estate and insurance broker, who had a hydro system built for his off-grid cabin on 50 acres in the Ozark Mountains. The cabin and hydro system are unique and look really interesting. The cabin is available for rent as an AirBnB and is located in Thornfield, Missouri. The cabin is now advertised as having some solar panels with a gas powered generator to supplement the solar. Michael’s hydroelectric project looked really interesting and I was curious about the technical details. In the YouTube videos, <a href="https://www.youtube.com/watch?v=VFQQI96CMK8">Did we MAKE HYDRO POWER Using Our Waterwheel for Self Reliant Off Grid Living?</a> and <a href="https://www.youtube.com/watch?v=iMqMIJGlrdc">Possible Hydro Power Solutions for our Off Grid Cabin? A BIG THANKS TO YOU!!</a>, he discusses the status of the system. I was disappointed to hear that his system wasn’t working, because at first glance it looked very impressive. I decided to learn a little about small hydroelectric systems and document in this notebook what I’ve learned.</p>
</section>
<section id="lake-district-overshot-waterwheel-project-review-and-analysis" class="level4">
<h4 class="anchored" data-anchor-id="lake-district-overshot-waterwheel-project-review-and-analysis"><a href="./Lake District Overshot Waterwheel Project.html">Lake District Overshot Waterwheel Project Review and Analysis</a></h4>
<p>This notebook examines the design of a small hydroelectric water wheel built by <a href="https://www.krisharbour.co.uk/">Kris Harbour Natural Building</a>. The water wheel is a 2.1 meter diameter wheel and he expected to generate between 1.5 and 1.7 kW. The project is documented in four YouTube videos, links are here: <a href="https://www.youtube.com/watch?v=7l5xxIGiW7o">Part 1</a>, <a href="https://www.youtube.com/watch?v=PvgeSJKlNUs">Part 2</a>, <a href="https://www.youtube.com/watch?v=DInwut0DzTQ">Part 3</a>, <a href="https://www.youtube.com/watch?v=WPICp3c_qIQ">Part 4</a> and <a href="https://www.youtube.com/watch?v=RWTgMWRc2W4">Part 5</a>. The videos provide some technical details, but not enough to satisfy me. My JupyterLab notebook will cover the project description, the water wheel design, generator, flume, inverter and other topics he did not address such as instrumentation, safety, maintenance, reliability and economics. (this is a work in progress)</p>
<p>Future topics</p>
<ul>
<li>electric power, motors, magnetics<br>
</li>
<li>Inductor and transformer design<br>
</li>
<li>Electric propulsion</li>
</ul>
</section>
</section>
<section id="heat-transfer" class="level3">
<h3 class="anchored" data-anchor-id="heat-transfer">Heat transfer</h3>
<ul>
<li>Heat sink calculations for audio power amplifier <!--- : TPA6021A4 with 20-pin DIP anodized heat sink (Aavid Thermalloy 580400B00000, Digi-Key HS181-ND) ---></li>
<li>Cooling of a PCB in a box (example 15-12)</li>
<li>Cooling of a sealed box (example 15-10)</li>
</ul>
</section>
<section id="radio-and-rf-design" class="level3">
<h3 class="anchored" data-anchor-id="radio-and-rf-design">Radio and RF design</h3>
<ul>
<li>scikit-rf<br>
</li>
<li>signals and spectra, modulation and coding<br>
</li>
<li>topics in microwave engineering<br>
</li>
<li>Smith chart plots<br>
</li>
<li>antenna design<br>
</li>
<li>antenna temperature<br>
</li>
<li>receiver design, analog FE for SDR<br>
</li>
<li>Link Analysis
<ul>
<li>starlink example (LEO)<br>
</li>
<li>Direct to cellphone satellite service<br>
</li>
</ul></li>
<li>Hydrogen line receiver
<ul>
<li>H1 line signal strength<br>
</li>
<li>basic design and feasibility<br>
</li>
<li>antenna design, horn, other<br>
</li>
<li>receiver design<br>
</li>
<li>filter design<br>
</li>
<li>mapping the sky</li>
</ul></li>
</ul>
</section>
<section id="information-security" class="level3">
<h3 class="anchored" data-anchor-id="information-security"><a href="https://en.wikipedia.org/wiki/Information_security">Information security</a></h3>
<section id="password-card" class="level4">
<h4 class="anchored" data-anchor-id="password-card"><a href="./password_card.html">Password card</a></h4>
<p>This notebook describes the use of a password card and the Python code that generates the password card. The password card is a grid of random letters, numbers and special characters that provides a convenient aid to generate and remember long and complex passwords. A basic description of the password card and instructions are provided along with the Python code used to generate the password card. A security analysis and an analysis of alternatives is provided.</p>
<ul>
<li>Diceware<br>
</li>
<li>Encrypt text for SMS</li>
</ul>
</section>
</section>
<section id="electromagnetics" class="level3">
<h3 class="anchored" data-anchor-id="electromagnetics">Electromagnetics</h3>
<ul>
<li>coil design</li>
</ul>
</section>
<section id="signal-processing" class="level3">
<h3 class="anchored" data-anchor-id="signal-processing">Signal processing</h3>
<ul>
<li>Fourier transforms</li>
<li>Discrete Fourier transforms</li>
<li>Windows</li>
<li>Filters</li>
</ul>
</section>
<section id="circuit-python" class="level3">
<h3 class="anchored" data-anchor-id="circuit-python">Circuit Python</h3>
<ul>
<li>A description is <a href="https://learn.adafruit.com/welcome-to-circuitpython">here</a> and <a href="https://circuitpython.org/">here</a></li>
<li>A list of hardware supported is <a href="https://circuitpython.org/downloads?sort-by=date-desc">here</a></li>
</ul>
</section>
</section>
<section id="civil-engineering" class="level2">
<h2 class="anchored" data-anchor-id="civil-engineering"><a href="https://en.wikipedia.org/wiki/Civil_engineering">Civil engineering</a></h2>
<ul>
<li>Design of footings</li>
<li>Capacity of foudations</li>
</ul>
</section>
<section id="mechanical-engineering" class="level2">
<h2 class="anchored" data-anchor-id="mechanical-engineering"><a href="https://en.wikipedia.org/wiki/Mechanical_engineering">Mechanical engineering</a></h2>
<ul>
<li>Two point supported beam</li>
<li>Cantilever beam</li>
<li>Thermal effictiveness of fins</li>
<li>Fluid flow in pipes</li>
<li>Area moment of inertia</li>
<li>Helical spring</li>
<li>atmospheric water extraction</li>
<li>canaon ball balistics</li>
<li>Trombe wall</li>
<li>Boiling eggs (example 4-3)</li>
</ul>
</section>
<section id="engineering-economics" class="level2">
<h2 class="anchored" data-anchor-id="engineering-economics"><a href="https://en.wikipedia.org/wiki/Engineering_economics">Engineering economics</a></h2>
<ul>
<li>Value analysis</li>
<li>Linear programming</li>
<li>Critical path economy</li>
<li>Interest and money - time relationships</li>
<li>Depreciation and valuation</li>
<li>Capital budgeting</li>
<li>Risk, uncertainty, and sensitivity analysis</li>
<li>Fixed, incremental, and sunk costs</li>
<li>Replacement studies</li>
<li>Minimum cost formulas</li>
<li>Various economic studies in relation to both public and private ventures</li>
</ul>
</section>
<section id="engineering-mathmatics" class="level2">
<h2 class="anchored" data-anchor-id="engineering-mathmatics"><a href="https://en.wikipedia.org/wiki/Engineering_mathematics">Engineering mathmatics</a></h2>
<ul>
<li>Differential equations</li>
<li>Linear differential equations</li>
<li>Simutaneous linear differential equations</li>
<li>Fourier series and integrals</li>
<li>Laplace transform</li>
<li>Partial differential equations</li>
<li>Bessel functions</li>
<li>Functions of a complex variable</li>
<li>Integration in the complex plane</li>
<li>Theory of reidues</li>
<li>Conformal mapping</li>
<li>Vector analysis</li>
<li>Taylor series</li>
<li>Gamma and Beta functions</li>
<li>Numerical soultion of equations</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>